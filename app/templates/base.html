<!DOCTYPE html>
<html lang="ru" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Gosha{% endblock %} â€” Connections Platform</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="/static/css/variables.css">
    <link rel="stylesheet" href="/static/css/base.css">
    <link rel="stylesheet" href="/static/css/components.css">
    {% block extra_css %}{% endblock %}

    <!-- Initialize theme before render to prevent flash -->
    <script>
        const saved = localStorage.getItem('theme');
        if (saved) document.documentElement.setAttribute('data-theme', saved);
        else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.documentElement.setAttribute('data-theme', 'dark');
        }
    </script>
</head>
<body>

    {% block navbar %}
        {% if current_user %}
            {% include "components/navbar_auth.html" %}
        {% else %}
            {% include "components/navbar_public.html" %}
        {% endif %}
    {% endblock %}

    {% block sidebar %}{% endblock %}

    <main class="main-content {% block main_class %}{% endblock %}">
        {% block content %}{% endblock %}
    </main>

    {% block footer %}
        {% include "components/footer.html" %}
    {% endblock %}

    <script src="/static/js/theme.js"></script>
    <script src="/static/js/app.js"></script>
    {% block extra_js %}{% endblock %}

</body>
</html>
